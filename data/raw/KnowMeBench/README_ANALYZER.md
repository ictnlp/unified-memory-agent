# KnowMeBench é€šç”¨æ•°æ®åˆ†æå·¥å…·ä½¿ç”¨è¯´æ˜

## ğŸ“– æ¦‚è¿°

`analyze_dataset_universal.py` æ˜¯ä¸€ä¸ªé€šç”¨çš„æ•°æ®é›†åˆ†æå·¥å…·ï¼Œæ”¯æŒ KnowMeBench çš„æ‰€æœ‰ä¸‰ä¸ªæ•°æ®é›†ï¼ˆdataset1, dataset2, dataset3ï¼‰çš„åˆ†æå’Œå¯¹æ¯”ã€‚

## ğŸ†š ä¸‰ä¸ªDatasetçš„å·®å¼‚åˆ†æ

| ç‰¹æ€§ | Dataset1 | Dataset2 | Dataset3 |
|------|----------|----------|----------|
| **å†…å¿ƒæƒ³æ³•å­—æ®µ** | `inner_thought` | `mind` | `Mind` (å¤§å†™) |
| **ç¯å¢ƒå­—æ®µ** | `environment` | `environment` | `Environment` (å¤§å†™) |
| **èƒŒæ™¯å­—æ®µ** | `background` | `background` | `Background` (å¤§å†™) |
| **è®°å½•æ•°é‡** | 6,644 | 11,995 | 8,423 |
| **Categoryå­—æ®µ** | æ—  | æœ‰ | æœ‰ |
| **æ—¶é—´è·¨åº¦** | 40.0 å¹´ | 62.5 å¹´ | 1.8 å¹´ |
| **ç‹¬ç‰¹åœ°ç‚¹** | 1,496 | 627 | 402 |
| **å¹³å‡å†…å®¹é•¿åº¦** | 769 å­—ç¬¦ | 595 å­—ç¬¦ | 810 å­—ç¬¦ |

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

```bash
# åˆ†æå•ä¸ªæ•°æ®é›†
python3 analyze_dataset_universal.py --dataset dataset1

# åˆ†ææ‰€æœ‰æ•°æ®é›†å¹¶ç”Ÿæˆå¯¹æ¯”æŠ¥å‘Š
python3 analyze_dataset_universal.py --dataset all
```

### å®Œæ•´å‚æ•°

```bash
python3 analyze_dataset_universal.py \
  --dataset dataset1 \              # æ•°æ®é›†é€‰æ‹©: dataset1, dataset2, dataset3, all
  --input-dir ./KnowmeBench \       # è¾“å…¥ç›®å½•è·¯å¾„
  --output-dir ./analysis_output    # è¾“å‡ºç›®å½•è·¯å¾„
```

## ğŸ“Š åˆ†æç»´åº¦

### 1. åŸºç¡€ä¿¡æ¯ (Basic Info)
- æ•°æ®é›†ç±»å‹ï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰
- æ€»è®°å½•æ•°
- æ—¶é—´è·¨åº¦ï¼ˆå¹´ï¼‰
- ç‹¬ç‰¹åœ°ç‚¹æ•°
- æ‰€æœ‰å­—æ®µåˆ—è¡¨
- **å­—æ®µå®Œæ•´æ€§ç»Ÿè®¡**ï¼ˆæ¯ä¸ªå­—æ®µçš„æ•°æ®é‡å’Œç™¾åˆ†æ¯”ï¼‰

### 2. æ—¶é—´åˆ†å¸ƒ (Time Distribution)
- å¹³å‡æ—¶é—´é—´éš”
- ä¸­ä½æ•°æ—¶é—´é—´éš”
- æœ€å°/æœ€å¤§æ—¶é—´é—´éš”
- **æ—¶é—´é—´éš”åˆ†å¸ƒ**ï¼ˆ<=1åˆ†é’Ÿ, 1-5åˆ†é’Ÿ, 5-30åˆ†é’Ÿ, 30-60åˆ†é’Ÿ, 1-24å°æ—¶, 1-7å¤©, >7å¤©ï¼‰

### 3. æ—¶é—´æ¨¡å¼ (Temporal Patterns)
- **æ˜ŸæœŸåˆ†å¸ƒ**ï¼ˆå‘¨ä¸€åˆ°å‘¨æ—¥çš„è®°å½•åˆ†å¸ƒï¼‰
- **å¹´ä»½åˆ†å¸ƒ**ï¼ˆæ¯å¹´çš„è®°å½•æ•°é‡ï¼‰
- **å°æ—¶åˆ†å¸ƒ**ï¼ˆ24å°æ—¶çš„è®°å½•åˆ†å¸ƒï¼‰
- **æœˆä»½åˆ†å¸ƒ**ï¼ˆ12ä¸ªæœˆçš„è®°å½•åˆ†å¸ƒï¼‰

### 4. Categoryåˆ†å¸ƒ (Category Distribution)
- æœ‰categoryå­—æ®µçš„è®°å½•æ•°
- ç‹¬ç‰¹categoryæ•°é‡
- categoryé¢‘ç‡ç»Ÿè®¡
- unique categoryç»„åˆ

### 5. å†…å®¹é•¿åº¦ (Content Length)
- æ¯ä¸ªå†…å®¹å­—æ®µçš„ç»Ÿè®¡ï¼š
  - éç©ºè®°å½•æ•°
  - å¹³å‡é•¿åº¦
  - ä¸­ä½æ•°é•¿åº¦
  - æœ€å°/æœ€å¤§é•¿åº¦

### 6. å†…å®¹å­—æ®µå…±ç° (Content Co-occurrence)
- æ€»å…±ç°æ¬¡æ•°
- å¸¸è§å­—æ®µç»„åˆæ’åº
- ä¾‹å¦‚ï¼š`mind + action` å‡ºç°æ¬¡æ•°

### 7. åœ°ç‚¹åˆ†å¸ƒ (Location Distribution)
- ç‹¬ç‰¹åœ°ç‚¹æ€»æ•°
- æ¯ä¸ªåœ°ç‚¹çš„å‡ºç°é¢‘ç‡
- Top 20 æœ€å¸¸è§åœ°ç‚¹

## ğŸ“ è¾“å‡ºæ–‡ä»¶

### å•ä¸ªæ•°æ®é›†åˆ†æ
```
analysis_output/
â”œâ”€â”€ dataset_analysis_dataset1.json    # Dataset1 å®Œæ•´åˆ†æç»“æœ
â”œâ”€â”€ dataset_analysis_dataset2.json    # Dataset2 å®Œæ•´åˆ†æç»“æœ
â””â”€â”€ dataset_analysis_dataset3.json    # Dataset3 å®Œæ•´åˆ†æç»“æœ
```

### è·¨æ•°æ®é›†å¯¹æ¯”
```
analysis_output/
â””â”€â”€ dataset_comparison.json           # ä¸‰ä¸ªæ•°æ®é›†çš„å¯¹æ¯”ç»“æœ
```

## ğŸ“” åˆ†ææŠ¥å‘Šç¤ºä¾‹

### Dataset1 åˆ†ææ‘˜è¦
```
======================================================================
KnowMeBenchæ•°æ®é›†åˆ†ææ‘˜è¦ - DATASET1
======================================================================

ğŸ“Š åŸºç¡€ä¿¡æ¯:
  æ•°æ®é›†ç±»å‹: dataset1
  æ€»è®°å½•æ•°: 6,644
  æ—¶é—´è·¨åº¦: 40.0 å¹´
  ç‹¬ç‰¹åœ°ç‚¹æ•°: 1,496
  æ‰€æœ‰å­—æ®µ: action, background, dialogue, environment, id, inner_thought, location, timestamp

ğŸ“ˆ å­—æ®µå®Œæ•´æ€§:
  action              :  3,898 ( 58.7%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
  background          :  1,449 ( 21.8%) â–ˆâ–ˆâ–ˆâ–ˆ
  dialogue            :  3,298 ( 49.6%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
  environment         :  1,683 ( 25.3%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
  inner_thought       :  3,215 ( 48.4%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
  location            :  6,638 ( 99.9%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
  timestamp           :  6,644 (100.0%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ

â±ï¸  æ—¶é—´åˆ†å¸ƒ:
  å¹³å‡é—´éš”: 3255.43 åˆ†é’Ÿ
  ä¸­ä½æ•°é—´éš”: 1.0 åˆ†é’Ÿ
  æœ€å°é—´éš”: -540.0 åˆ†é’Ÿ (æ—¶é—´å€’åº)
  æœ€å¤§é—´éš”: 5862060.0 åˆ†é’Ÿ (~11å¹´)

ğŸ“… æ—¶é—´æ¨¡å¼:
  æ˜ŸæœŸåˆ†å¸ƒ:
    å‘¨ä¸€: 1185 (18.3%)
    å‘¨äºŒ: 1515 (23.4%)
    å‘¨ä¸‰: 659 (10.2%)
    ...
```

### è·¨æ•°æ®é›†å¯¹æ¯”æŠ¥å‘Š

```
========================================================================
æ•°æ®é›†å¯¹æ¯”æŠ¥å‘Š
========================================================================

Dataset   Records  Time Span (years)  Locations  Avg Content Length (chars)
--------  -------  ----------------  ---------  ------------------------
dataset1  6644     40.0              1496       769.0
dataset2  11995    62.5              627        595.0
dataset3  8423     1.8               402        810.0
```

## ğŸ” æ ¸å¿ƒç‰¹æ€§

### 1. è‡ªåŠ¨æ£€æµ‹æ•°æ®é›†ç±»å‹
è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹æ•°æ®é›†ç±»å‹ï¼Œæ— éœ€æ‰‹åŠ¨æŒ‡å®šï¼š

```python
# è‡ªåŠ¨æ£€æµ‹é€»è¾‘
if 'inner_thought' in fields:
    return 'dataset1'
elif 'mind' in fields and 'Mind' not in fields:
    return 'dataset2'
elif 'Mind' in fields:
    return 'dataset3'
```

### 2. è‡ªé€‚åº”å­—æ®µæ˜ å°„
æ ¹æ®æ£€æµ‹åˆ°çš„æ•°æ®é›†ç±»å‹ï¼Œè‡ªåŠ¨ä½¿ç”¨æ­£ç¡®çš„å­—æ®µåï¼š

```python
FIELD_MAPPINGS = {
    'dataset1': {
        'content_fields': ['action', 'dialogue', 'environment', 'background', 'inner_thought'],
    },
    'dataset2': {
        'content_fields': ['action', 'dialogue', 'environment', 'background', 'mind'],
    },
    'dataset3': {
        'content_fields': ['action', 'dialogue', 'Environment', 'Background', 'Mind'],
    }
}
```

### 3. å¯è§†åŒ–è¾“å‡º
- å­—æ®µå®Œæ•´æ€§ä½¿ç”¨æ¡å½¢å›¾å¯è§†åŒ–
- æ—¶é—´åˆ†å¸ƒä½¿ç”¨æ¡å½¢å›¾ç™¾åˆ†æ¯”
- å†…å®¹é•¿åº¦ç»Ÿè®¡åŒ…å«ç›´æ–¹å›¾å¼åˆ†å¸ƒ

## ğŸ“‹ è¾“å‡ºJSONç»“æ„

```json
{
  "dataset_type": "dataset1",
  "basic_info": {
    "total_records": 6644,
    "time_span_years": 40.0,
    "unique_locations": 1496,
    "field_completeness": {
      "action": {"count": 3898, "percentage": 58.7},
      ...
    }
  },
  "time_distribution": {
    "avg_interval_minutes": 3255.43,
    "interval_distribution": {
      "<=1åˆ†é’Ÿ": 3372,
      "1-5åˆ†é’Ÿ": 1360,
      ...
    }
  },
  "temporal_patterns": {
    "weekday_distribution": {"å‘¨ä¸€": 1185, "å‘¨äºŒ": 1515, ...},
    "year_distribution": {"1969": 40, "1970": 26, ...}
  },
  "content_length": {
    "action": {
      "avg_length": 136,
      "median_length": 118,
      "min_length": 4,
      "max_length": 1590
    },
    ...
  },
  "content_cooccurrence": {
    "total_cooccurrences": 4376,
    "top_combinations": [
      [["action", "dialogue"], 1500],
      [["action", "environment"], 800],
      ...
    ]
  },
  "category_distribution": {
    "note": "è¯¥æ•°æ®é›†æ²¡æœ‰categoryå­—æ®µ"
  }
}
```

## ğŸ’¡ é‡è¦å‘ç°

### Dataset1 (The Notebook)
- **æ—¶é—´è·¨åº¦æœ€é•¿**: 40å¹´ (1969-2009)
- **åœ°ç‚¹æ•£å¸ƒæœ€å¹¿**: 1,496ä¸ªç‹¬ç‰¹åœ°ç‚¹
- **å­—æ®µä½¿ç”¨å‡è¡¡**: action, dialogue, inner_thought éƒ½è¾ƒæ´»è·ƒ

### Dataset2 (My Brilliant Friend)
- **è®°å½•æ•°æœ€å¤š**: 11,995æ¡
- **æ—¶é—´è·¨åº¦é€‚ä¸­**: 62.5å¹´ (1948-2010)
- **åŒ…å«categoryå­—æ®µ**: "background, mind" ç­‰ç»„åˆ
- **åœ°ç‚¹é›†ä¸­**: 627ä¸ªç‹¬ç‰¹åœ°ç‚¹ï¼ŒåŸå¸‚åœºæ™¯ä¸ºä¸»

### Dataset3 (In Search of Lost Time)
- **æ—¶é—´è·¨åº¦æœ€çŸ­**: ä»…1.8å¹´ (1896-1898)
- **å†…å®¹é•¿åº¦æœ€é•¿**: å¹³å‡810å­—ç¬¦
- **categoryæœ€ä¸°å¯Œ**: 39ç§ä¸åŒç»„åˆ
- **å¤§å†™å­—æ®µ**: Environment, Background, Mind

## ğŸ› ï¸ æŠ€æœ¯ç»†èŠ‚

### æ—¶é—´é—´éš”åˆ†ç±»è§„åˆ™
```python
if interval <= 1:        # <= 1åˆ†é’Ÿ
    category = "<=1åˆ†é’Ÿ"
elif interval <= 5:      # 1-5åˆ†é’Ÿ
    category = "1-5åˆ†é’Ÿ"
elif interval <= 30:     # 5-30åˆ†é’Ÿ
    category = "5-30åˆ†é’Ÿ"
elif interval <= 60:     # 30-60åˆ†é’Ÿ
    category = "30-60åˆ†é’Ÿ"
elif interval <= 1440:   # 1-24å°æ—¶
    category = "1-24å°æ—¶"
elif interval <= 10080:  # 1-7å¤©
    category = "1-7å¤©"
else:                    # >7å¤©
    category = ">7å¤©"
```

### å†…å®¹å­—æ®µå…±ç°åˆ†æ
æ£€æµ‹å“ªäº›å†…å®¹å­—æ®µç»å¸¸åŒæ—¶å‡ºç°åœ¨åŒä¸€è®°å½•ä¸­ï¼Œä¾‹å¦‚ï¼š
- `mind + action` (696æ¬¡)
- `action + dialogue` (488æ¬¡)
- `Background + Mind` (239æ¬¡)

## ğŸ“ ä¸åŸè„šæœ¬çš„åŒºåˆ«

| ç‰¹æ€§ | åŸè„šæœ¬ (analyze_dataset.py) | æ–°è„šæœ¬ (analyze_dataset_universal.py) |
|------|----------------------------|----------------------------------------|
| **æ”¯æŒæ•°æ®é›†** | ä»… dataset1 | dataset1, dataset2, dataset3 |
| **è‡ªåŠ¨æ£€æµ‹** | æ—  | è‡ªåŠ¨æ£€æµ‹æ•°æ®é›†ç±»å‹ |
| **categoryåˆ†æ** | ä¸æ”¯æŒ | å®Œæ•´æ”¯æŒ |
| **æ—¶é—´æ¨¡å¼** | æ—  | æ˜ŸæœŸ/å¹´ä»½/æœˆä»½/å°æ—¶åˆ†å¸ƒ |
| **å­—æ®µå…±ç°** | æ—  | å†…å®¹å­—æ®µå…±ç°åˆ†æ |
| **è·¨æ•°æ®é›†å¯¹æ¯”** | ä¸æ”¯æŒ | å®Œæ•´å¯¹æ¯”æŠ¥å‘Š |
| **å¯è§†åŒ–æ¡** | æ—  | ASCIIæ¡å½¢å›¾ |

## ğŸ¯ ä½¿ç”¨å»ºè®®

### 1. å¿«é€ŸæŸ¥çœ‹å•ä¸ªæ•°æ®é›†
```bash
python3 analyze_dataset_universal.py --dataset dataset2
```
é€‚åˆå¿«é€Ÿäº†è§£æŸä¸ªæ•°æ®é›†çš„åŸºæœ¬æƒ…å†µã€‚

### 2. å…¨é¢å¯¹æ¯”æ‰€æœ‰æ•°æ®é›†
```bash
python3 analyze_dataset_universal.py --dataset all
```
é€‚åˆé€‰æ‹©åˆé€‚çš„æ•°æ®é›†æˆ–äº†è§£ä¸‰è€…å·®å¼‚ã€‚

### 3. åˆ†æè¾“å‡ºJSON
```python
import json

# åŠ è½½åˆ†æç»“æœ
with open('analysis_output/dataset_analysis_dataset1.json', 'r') as f:
    results = json.load(f)

# æŸ¥çœ‹ç‰¹å®šç»´åº¦
print(results['basic_info']['field_completeness'])
print(results['temporal_patterns']['year_distribution'])
```

## ğŸ› å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæœ‰äº›æ—¶é—´é—´éš”æ˜¯è´Ÿæ•°ï¼Ÿ
A: Dataset1ä¸­å­˜åœ¨æ—¶é—´å€’åºç°è±¡ï¼Œå³åé¢çš„è®°å½•æ—¶é—´æ—©äºå‰é¢çš„è®°å½•ã€‚è¿™æ˜¯æ•°æ®ç‰¹æ€§ã€‚

### Q: å¦‚ä½•è§£è¯»å­—æ®µå®Œæ•´æ€§åˆ†æï¼Ÿ
A:
- å®Œæ•´æ€§é«˜ (>80%): è¯¥å­—æ®µå‡ ä¹åœ¨æ¯æ¡è®°å½•ä¸­éƒ½æœ‰å€¼
- å®Œæ•´æ€§ä¸­ç­‰ (50-80%): è¯¥å­—æ®µåœ¨ä¸€åŠä»¥ä¸Šçš„è®°å½•ä¸­æœ‰å€¼
- å®Œæ•´æ€§ä½ (<20%): è¯¥å­—æ®µåœ¨å°‘æ•°è®°å½•ä¸­å‡ºç°

### Q: æ—¶é—´æ¨¡å¼åˆ†ææœ‰ä»€ä¹ˆç”¨ï¼Ÿ
A: å¯ä»¥äº†è§£æ•…äº‹çš„å™äº‹èŠ‚å¥ã€æƒ…èŠ‚åˆ†å¸ƒã€ä»¥åŠä½œè€…çš„åˆ›ä½œä¹ æƒ¯ã€‚

### Q: å¦‚ä½•ä½¿ç”¨å¯¹æ¯”æŠ¥å‘Šé€‰æ‹©æ•°æ®é›†ï¼Ÿ
A: æ ¹æ®ä½ çš„å®éªŒéœ€æ±‚ï¼š
- é•¿æœŸè®°å¿†æµ‹è¯• â†’ é€‰ dataset1 (40å¹´è·¨åº¦)
- é«˜é¢‘äº¤äº’æµ‹è¯• â†’ é€‰ dataset2 (æœ€å¤šè®°å½•)
- çŸ­æœŸå¯†é›†å›å¿† â†’ é€‰ dataset3 (æœ€çŸ­è·¨åº¦ä½†æœ‰æœ€ä¸°å¯Œcategory)

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. è¾“å…¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
2. Pythonç‰ˆæœ¬ >= 3.7
3. å®‰è£…ä¾èµ–: `pip install statistics` (Pythonå†…ç½®)

---

## ğŸ”— ç›¸å…³å·¥å…·

- [semantic_chunker_universal.py](./semantic_chunker_universal.py) - é€šç”¨è¯­ä¹‰åˆ†å—å·¥å…·
- [KnowMeBench README](./readme.md) - åŸå§‹æ•°æ®é›†è¯´æ˜

---

**ä½œè€…**: Claude
**æ›´æ–°æ—¶é—´**: 2026-02-09
**ç‰ˆæœ¬**: 2.0 - Universal Edition
